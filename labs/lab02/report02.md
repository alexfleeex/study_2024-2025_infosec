# **Отчет к лабораторной работе №2**
## **Common information**
discipline: Основы информационной безопасности
group: НПМбд-02-21  
author: Ермолаев А.М.
---
---
## **Цель работы**

Получить практический навык работы в консоли с атрибутами файлов, закрепить теоретические основы дискреционного разграничения доступа в современных системах с открытым кодом на базе ОС Linux.

## **Выполнение работы**
В установленной при выполнении предыдущей лабораторной работы
операционной системе создадим учётную запись пользователя guest при помощи команды
```
sudo useradd guest
```
Затем зададим пароль для пользователя guest командой
```
passwd guest.
```

![Создание пользователя](images/s1_add_user.png)

Войдите в систему от имени пользователя guest:


![Вход в систему](images/s2_login_new_user.png)

Определим директорию, в которой вы находитесь, командой

```
pwd
```
Действительно, данная директория является домашней для пользователя guest.
Также уточним имя вашего пользователя командой
```
whoami
```

![Команды pwd и whoami](images/s3_pwd_whoami.png)

Уточним имя вашего пользователя, его группу, а также группы, куда входит пользователь, командой 
```
id
``` 

Сравним вывод команды с выводом команды 
```
groups
```

![Команды id и groups](images/s4_id_groups.png)

Теперь просмотрим файл /etc/passwd командой
```
cat /etc/passwd
```

![Просмотр содержимого файла /etc/passwd](images/s5_passwd.png)

Для более удобного поиска воспльзуемся командой cat в связке с командой grep:

```
cat /etc/passwd | grep guest
```

![Совместное использование команд cat и grep](images/s6_passwd_guest.png)

Как видно, id и gid пользователя guest совпадают с результатами выполнения команд id и groups.

Определим существующие в системе директории командой
```
ls -l /home/
```

![Просмотр директорий](images/s7_ls.png)

Список поддиректорий директории получить удалось.
На все поддиректории установлены все права доступа - чтение (read), запись (write), выполнение (execute).

Проверим, какие расширенные атрибуты установлены на поддиректориях, находящихся в директории /home, командой
```
lsattr /home
```
![Использование команды lsattr](images/s8_lsattr.png)

Расширенные атрибуты директории увидеть не удалось.

Создадим в домашней директории поддиректорию dir1 командой
```
mkdir dir1
```
Определим командами
``` 
ls -l
``` 
и 
```
lsattr
```
какие права доступа и расширенные атрибуты были выставлены на директорию dir1.


![Права доспупа к созданной пользователем директрии](images/s9_dir.png)

Снимем с директории dir1 все атрибуты командой
```
chmod 000 dir1
```

![Изменение прав доступа комадной chmod](images/s10_chmod.png)

Попытаемся создать в директории dir1 файл file1 командой
```
echo "test" > /home/guest/dir1/file1
```

![Отказ в создании файла](images/s11_permission_denied.png)

Отказ в выполнении операции по созданию файла произошел ввиду снятия прав на все операции с пользователя guest.

Начнем заполнять таблицу «Установленные права и разрешённые действия», выполняя действия от имени владельца директории (файлов), определив опытным путём, какие операции разрешены, а какие нет.

Для начала установим для пользователя guest праыва только на чтения для директории dir1 и файла file1, после чего проделаем различные действия с файлом и директорией:

![Действия с файлом и директорией](images/s12_check1.png)

В итоге, получилась следующая таблица

|директория|файл|оп. 1|оп. 2|оп. 3|оп. 4|оп. 5|оп. 6|оп. 7|оп. 8|
|----------|----|-----|-----|-----|-----|-----|-----|-----|-----|
|    000   |000 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    100   |000 |  -  |  -  |  -  |  -  |  +  |  -  |  -  |  -  |
|    200   |000 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    300   |000 |  +  |  +  |  -  |  -  |  +  |  -  |  +  |  -  |
|    400   |000 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    500   |000 |  -  |  -  |  -  |  -  |  +  |  +  |  -  |  -  |
|    600   |000 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    700   |000 |  +  |  +  |  -  |  -  |  +  |  +  |  +  |  -  |
|    000   |100 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    100   |100 |  -  |  -  |  -  |  -  |  +  |  -  |  -  |  -  |
|    200   |100 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    300   |100 |  +  |  +  |  -  |  -  |  +  |  -  |  +  |  -  |
|    400   |100 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    500   |100 |  -  |  -  |  -  |  -  |  +  |  +  |  -  |  -  |
|    600   |100 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    700   |100 |  +  |  +  |  -  |  -  |  +  |  +  |  +  |  -  |
|    000   |200 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    100   |200 |  -  |  -  |  +  |  -  |  +  |  -  |  -  |  -  |
|    200   |200 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    300   |200 |  +  |  +  |  +  |  -  |  +  |  -  |  +  |  -  |
|    400   |200 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    500   |200 |  -  |  -  |  +  |  -  |  +  |  +  |  -  |  -  |
|    600   |200 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    700   |200 |  +  |  +  |  +  |  -  |  +  |  +  |  +  |  -  |
|    000   |300 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    100   |300 |  -  |  -  |  +  |  -  |  +  |  -  |  -  |  -  |
|    200   |300 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    300   |300 |  +  |  +  |  -  |  +  |  +  |  -  |  +  |  -  |
|    400   |300 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    500   |300 |  -  |  -  |  +  |  -  |  +  |  +  |  -  |  -  |
|    600   |300 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    700   |300 |  +  |  +  |  +  |  -  |  +  |  +  |  +  |  -  |
|    000   |400 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    100   |400 |  -  |  -  |  -  |  +  |  +  |  -  |  -  |  +  |
|    200   |400 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    300   |400 |  +  |  +  |  -  |  +  |  +  |  -  |  +  |  +  |
|    400   |400 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    500   |400 |  -  |  -  |  -  |  +  |  +  |  +  |  -  |  +  |
|    600   |400 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    700   |400 |  +  |  +  |  -  |  +  |  +  |  +  |  +  |  +  |
|    000   |500 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    100   |500 |  -  |  -  |  -  |  +  |  +  |  -  |  -  |  +  |
|    200   |500 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    300   |500 |  +  |  +  |  -  |  +  |  +  |  -  |  +  |  +  |
|    400   |500 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    500   |500 |  -  |  -  |  -  |  +  |  +  |  +  |  -  |  +  |
|    600   |500 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    700   |500 |  +  |  +  |  -  |  +  |  +  |  +  |  +  |  +  |
|    000   |600 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    100   |600 |  -  |  -  |  +  |  +  |  +  |  -  |  -  |  +  |
|    200   |600 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    300   |600 |  +  |  +  |  +  |  +  |  +  |  -  |  +  |  +  |
|    400   |600 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    500   |600 |  -  |  -  |  +  |  +  |  +  |  +  |  -  |  +  |
|    600   |600 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    700   |600 |  +  |  +  |  +  |  +  |  +  |  +  |  +  |  +  |
|    000   |700 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    100   |700 |  -  |  -  |  +  |  +  |  +  |  -  |  -  |  +  |
|    200   |700 |  -  |  -  |  -  |  -  |  -  |  -  |  -  |  -  |
|    300   |700 |  +  |  +  |  +  |  +  |  +  |  -  |  +  |  +  |
|    400   |700 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    500   |700 |  -  |  -  |  +  |  +  |  +  |  +  |  -  |  +  |
|    600   |700 |  -  |  -  |  -  |  -  |  -  |  +  |  -  |  -  |
|    700   |700 |  +  |  +  |  +  |  +  |  +  |  +  |  +  |  +  |

где
* директория - права доступа директории
* файл права доступа файла
* оп. 1 - создание файла
* оп. 2 - удаление файла
* оп. 3 - запись в файл
* оп. 4 - чтение файла
* оп. 5 - смена директории
* оп. 6 - просмотр файлов в директории
* оп. 7 - переименование файла
* оп. 8 - смена атрибутов файла


Теперь на основе таблицы выше мы можем заполнить таблицу «Минимально необходимые права для выполнения операций внутри директории»:


|Операция|Директория мин. права|Файл мин. права|
|--------|---------------------|---------------|
|оп. 1   |300                  |000            |
|оп. 2   |300                  |000            |
|оп. 3   |100                  |400            |
|оп. 4   |100                  |200            |
|оп. 5   |300                  |000            |
|оп. 6   |300                  |000            |
|оп. 7   |300                  |000            |

где
* оп. 1 - создание файла
* оп. 2 - удаление файла
* оп. 3 - чтение файла
* оп. 4 - запись в файл
* оп. 5 - переименование файла
* оп. 6 - создание поддиректории
* оп. 7 - переименование файла
* оп. 8 - удаление поддиректории

## **Вывод**
В рамках выполнения работы я получил практический навык работы в консоли с атрибутами файлов, закрепил теоретические основы дискреционного разграничения доступа в современных системах с открытым кодом на базе ОС Linux.


## **Список литературы** ##
* https://habr.com/ru/articles/469667/
* https://docs.rockylinux.org/books/admin_guide/06-users/
* https://linux-faq.ru/page/komanda-lsattr